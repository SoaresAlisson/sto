---
title: "entities_and_relation_extraction"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{entities_and_relation_extraction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(sto)
```

## Named Entity extraction and its relations

The package {sto} also provides a set of tools to extract entities and relations from text. It does so by one of the simples form: by using the rule based approach. It contains a rule based extraction algorithm and a rule based relation extraction algorithm.
For more advanced NER, there is other packages such as 
[{crfsuite}](https://cran.r-project.org/web/packages/crfsuite/index.html), {UDpipe} and {spacyR}.
This functions do not work so well like the NER of the mentioned packages, but we think that, in some situations, they can be better job than joining unigram, bigrams, trigrams and so on.
Because it is a rule based approach, it is very simple to use and also fast. It will also requires a lot of cleaning, but you have the absolute control over which words are extracted and what is rejected. 

How it works?  
The function captures all words that 
- begins with uppercase, 
- followed by other uppercases, lowercase or numbers, without white space
- it can contain symbols like `_`, `-` or `.`.

In this way, words like "Covid-19" are also captured
In languages such as English and Portuguese, it extracts proper names. In German, it also extracts nouns.

There is some trade-off, of course.
It will capture a lot of undesired words and will demand posterior cleaning, like:
- It does not contain any sort of built-in classification.
- "Obama Chief of Staff Rahm Emanuel" will be captured as one entity, what is not wrong et al, but maybe not what we expect.

The downsides are 

 it will not capture:
- entities that begin with lowercase

```{r NER}
"John Does lives in New York in United States of America." |> extract_entity()
```

Or it is possible to use other languages, specifying the parameter `connectors` using the function `connectors(lang)`.

```{r NER pt}
"João Ninguém mora em São José do Rio Preto. Ele esteve antes em Sergipe" |>
  extract_entity(connect = connectors("pt"))
# To check the connectors:
connectors("pt")
# by default, the functions uses the parameter "misc" meaning "miscellaneous".
connectors("misc")

"John von Neumann (/vɒn ˈnɔɪmən/ von NOY-mən; Hungarian: Neumann János Lajos [ˈnɒjmɒn ˈjaːnoʃ ˈlɒjoʃ]; December 28, 1903 – February 8, 1957) was a Hungarian and American mathematician, physicist, computer scientist and engineer" |>
  extract_entity()
```




## Extracting a graph
It is possible to extract a graph from the extracted entities. First, happens the tokenization by sentence or paragraph.
Than, the entities are extracted using `extract_entity()`. Than a data frame with the coocurrence of words in sentences or paragraph is build. 

```{r}
text <- ""
```
It cant take a while. So, if you are interested only in some words, so first of all, filter the sentences/paragraphs with such words, than extract the graph.


